#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Check if any locale files are staged
STAGED_LOCALES=$(git diff --cached --name-only --diff-filter=ACM | grep "^public/locales/.*\.json$" || true)

if [ -n "$STAGED_LOCALES" ]; then
  echo "üîç Running translation checks on modified locale files..."
  
  node scripts/check-language.js
  
  if [ $? -ne 0 ]; then
    echo ""
    echo "‚ùå Translation check failed. Please fix the issues above before committing."
    echo "   Run 'node scripts/sync-translations.js --write' to add missing placeholders."
    echo ""
    exit 1
  fi
  
  echo "‚úÖ Translation checks passed"
else
  echo "‚è≠Ô∏è  No locale files modified, skipping translation checks"
fi